<html>

<head>
    <title>cszp Easy soccer execution program WIKI | プラグインの作り方</title>
    <meta http-equiv="content-type" charset="utf-8">
    <link href="https://fonts.googleapis.com/css?family=Kosugi+Maru&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP&display=swap" rel="stylesheet">
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=desert&lang=json"></script>
    <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../style.css"/>
</head>

<body>
<div id="page">
    <div class="page_title">
        <h1 class="title-h1">cszp Easy soccer execution program WIKI</h1>
        <h2 class="description">robocup2Dシュミレーションリーグの自動実行プログラムのwikiです。</h2>
    </div>
    <div class="left">
        <h1>プラグインの作り方</h1>
        <p>プラグインの作り方もすごくかんたんです。まず、以下のファイルが必要です。</p>
        <ul>
            <li>ルートディレクトリ （プラグインはこの中で作ります。）</li>
            <li>setup.json （ここに必要情報を詰め込みます）</li>
            <li>list.json （ここに表示文などを詰め込みます）</li>
            <li>__init__.py （ここにプログラム本体を詰め込みます。また他のプログラムの呼び出しも可能です）</li>
            <li>en_us.lang ja_jp.lang（言語ファイルです）</li>
        </ul>
        <p>では1つずつ説明していきます。</p>
        <h3 class="midasi">setup.json</h3>
        <p>setup.jsonはルートディレクトリの直下に作成します。作成者の情報などを書くところです。<br>中身の例としてはこのような感じです。</p>
        <pre class="prettyprint linenums" style="font-size: 18px;">
{
    "name": "test program",
    "version": "1.0.0",
    "author": "kumitatepazuru",
    "author_email": "teltelboya18@gmail.com",
    "description": "THE TEST PROGRAM"
}</pre>
        <p>意味はそれぞれ</p>
        <ul>
            <li>name        : プラグインの名前</li>
            <li>version     : プラグインのバージョン</li>
            <li>author      : 作成者の名前</li>
            <li>author_email: 作成者のメールアドレス</li>
            <li>description : かんたんな説明</li>
        </ul>
        <p>です。これがすべて書かれていないとcszpはプラグインとして認識をしません。</p>
        <h3 class="midasi">list.json</h3>
        <p>list.jsonは表示するコマンドなどを書き込みます。このファイルもルートディレクトリの直下に作成します。<br>このファイルはcszp_lang.questionで認識されます。</p>
        <p>中身の例としてはこのような感じです。</p>
        <pre class="prettyprint linenums" style="font-size: 18px;">
{
  "menu": [
    {
      "title": "TEST",
      "description": "PROGRAM TEST",
      "cmd": "TEST"
    }
  ]
}</pre>
        <p>少し構造が難し目です。意味はそれぞれ</p>
        <ul>
            <li>menu : どこで表示するか。いま標準対応しているのはホーム画面(menu)設定画面(setting)です。</li>
            <li>title : コマンドの表示部分です。画像で示すと<img src="plugin1.png" width=100% vspace="10"></li>
            <li>description : コマンドのかんたんな説明を書きます。画像で示すと<img src="plugin2.png" width=100% vspace="10"></li>
            <li>cmd : 実際のコマンドです。これが入力されるとその指定のプログラム内のplugin関数が呼び出されます。</li>
        </ul>
        <p>こんな感じです。</p>
        <div class="checkdiv"><span class="divtitle">POINT</span><h4 style="margin: 10px 0px;">cszp起動時の動作について(ver 4.1.10から)</h4><p>list.jsonに以下のようなプログラムを入力すると、cszpの起動時に、次に説明する__init__.pyのautostart関数（クラス）が呼ばれるようになります。初期設定はこちらで設定すると良いでしょう。</p>
            <pre class="prettyprint linenums" style="font-size: 18px;">
"auto_start":[
    {"cmd": "auto_start"}
]</pre></div>
        <h3 class="midasi">__init__.py</h3>
        <p>この中のplugin関数（クラス）が呼び出されます。<br>引数に（引数の名前は例です）</p>
        <ul>
            <li>lang : cszp_langクラスのデータです。主にlang.langのlangファイルからの翻訳に使われます。</li>
            <li>input_cmd : ユーザーが指定したコマンドを使います。違うコマンドを指定しても呼ばれるのはいつもplugin関数(クラス）なので判別するのに使えると思います。</li>
        </ul>
        <p>を指定してください。<br>これもルートディレクトリの直下に作成します。実際の呼び出しコマンドは</p>
        <pre class="prettyprint linenums" style="font-size: 18px;">
sys.path.append(lang.functo("menu", inp)[0])
plugin = import_module(lang.functo("menu", inp)[1])
reload(plugin)
try:
    plugin.plugin(lang,inp)</pre>
        <p>です。※メニュープラグインの場合</p>
        <h3 class="midasi">en_us.langとja_jp.lang</h3>
        <p>言語ファイルです。poファイルと構造が似ています。<br>このプログラムはルートディレクトリではなくルートディレクトリ内のlanguageディレクトリに作成します。<br>lang.lang()関数で認識されます。</p>
        <p>書き方はとてもかんたんです。例としてはこのような感じです。</p>
        <pre class="prettyprint linenums" style="font-size: 18px;">
cszp 簡単サッカー実行プログラム
cszp Easy soccer execution program

試合をする
Play a match

テスト試合をする
Play a test match

設定をする
Setting

リセットをかける
Reset

試合を複数回する
Play multiple matchs</pre>
        <p>書き方は上に翻訳をかけたい文字列、下に翻訳後の文字列を書くだけです。<br>コメントは翻訳をかけたい文字列にかぶっていなければ何を書いても大丈夫です。</p>
        <div class="checkdiv"><span class="divtitle">POINT</span><p>もし、同じ文字列だとしても書いてください。一応そのような書き方は可能ですが、非推奨です。<br>そもそもその機能はエラー回避のために作成した機能です。<br>作成者的にはプログラム的にどうかと思います。<br>また、翻訳したい言語をそもそも作成しないことも可能ですが上記の理由により、オススメしません。</p></div>
        <p>これでプラグインの作り方はマスターですw次はプラグインでインストール無しで使える標準コマンドを紹介します。</p>
    </div>
    <div id="right">
        <script>
            var text = "<ul>"
            $.getJSON('./content.json') // json読み込み開始
                .done(function(json){ // jsonの読み込みに成功した時
                    for(i=0;i<json.length;i++){
                        text += "<li><a href='"+json[i].link+"'>"+json[i].text+"</a></li>"
                    }
                    text += "</ul>"
                    document.getElementById("right").innerHTML = text;
                });
        </script>
    </div>
</div>
</body>

</html>
